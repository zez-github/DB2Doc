# 数据库文档生成器 - 日常操作指南

## 🚀 启动程序

### 方式一：使用启动脚本（推荐）
```bash
# 双击运行
start_production.bat

# 或命令行运行
.\start_production.bat
```

### 方式二：直接运行命令
```bash
# 生产模式（推荐，Waitress）
venv\Scripts\waitress-serve.exe --host 0.0.0.0 --port 5500 --call app.main:create_app

# 开发模式
python main.py
```

### 方式三：后台运行
```bash
# Windows后台运行（Waitress）
start /B venv\Scripts\waitress-serve.exe --host 0.0.0.0 --port 5500 --call app.main:create_app

# 输出重定向到日志
venv\Scripts\waitress-serve.exe --host 0.0.0.0 --port 5500 --call app.main:create_app > logs/runtime.log 2>&1
```

## 🛑 停止程序

### 方式一：使用停止脚本
```bash
# 双击运行
stop_service.bat

# 或命令行运行
.\stop_service.bat
```

### 方式二：命令行停止
```bash
# 结束所有Python进程（小心使用）
taskkill /f /im python.exe

# 结束指定端口的进程
netstat -ano | findstr :5500
taskkill /f /pid [PID号]
```

### 方式三：快捷键停止
- 在运行窗口中按 `Ctrl + C`

## 📊 监控和检查

### 检查程序状态
```bash
# 查看Python进程
tasklist | findstr python

# 查看端口占用
netstat -ano | findstr :5500

# 测试服务可用性
curl http://localhost:5500
```

### 查看日志
```bash
# 查看应用日志
type logs\app.log

# 实时查看日志（如果有tail命令）
tail -f logs\app.log

# 查看最近的日志
Get-Content logs\app.log -Tail 20
```

## 🔧 常见问题处理

### 1. 端口被占用
```bash
# 查找占用端口的进程
netstat -ano | findstr :5500

# 结束占用进程
taskkill /f /pid [PID号]
```

### 2. 程序无响应
```bash
# 强制结束
taskkill /f /im python.exe

# 或者重启系统
```

### 3. 数据库连接失败
- 检查数据库服务是否启动
- 检查网络连接
- 检查数据库配置信息

### 4. 星火大模型API调用失败
- 检查API密钥是否正确
- 检查网络连接
- 检查API额度是否充足

## 🔄 自动启动（可选）

### 1. 添加到系统启动项
1. 按 `Win + R` 打开运行对话框
2. 输入 `shell:startup`
3. 将 `start_production.bat` 复制到打开的文件夹

### 2. 创建系统服务（高级）
```bash
# 使用NSSM创建Windows服务（Waitress）
nssm install "DB2DocService" "D:\SPACE\projects\2025.02 技术探索\DB2Doc\venv\Scripts\waitress-serve.exe"
nssm set "DB2DocService" AppParameters "--host 0.0.0.0 --port 5500 --call app.main:create_app"
nssm set "DB2DocService" AppDirectory "D:\SPACE\projects\2025.02 技术探索\DB2Doc"
nssm start "DB2DocService"
```

## 📱 Web界面访问

### 本地访问
- http://localhost:5500
- http://127.0.0.1:5500

### 局域网访问
- http://[你的IP地址]:5500
- 例如：http://192.168.1.100:5500

### 获取本机IP地址
```bash
# Windows
ipconfig

# 查看IPv4地址
ipconfig | findstr IPv4
```

## 🛠️ 维护操作

### 定期维护
```bash
# 清理临时文件
del /q temp\*

# 清理旧日志（保留最近7天）
forfiles /p logs /s /m *.log /d -7 /c "cmd /c del @path"

# 重启应用
.\stop_service.bat
.\start_production.bat
```

### 备份数据
```bash
# 运行备份脚本
python backup.py

# 手动备份配置
copy config.json config_backup.json
```

## 🔍 性能监控

### 系统资源监控
```bash
# 运行监控脚本
python monitor.py

# 查看系统资源使用情况
tasklist /fi "imagename eq python.exe"
```

### 应用性能监控
- 访问 http://localhost:5500/status （如果实现了状态页面）
- 查看日志文件中的性能数据
- 监控数据库连接数

## 📞 故障排除

### 1. 收集故障信息
```bash
# 系统信息
systeminfo

# 错误日志
type logs\app.log | findstr ERROR

# 网络状态
ipconfig /all
netstat -an
```

### 2. 联系支持
如果遇到无法解决的问题，请提供：
- 错误日志内容
- 系统配置信息
- 操作步骤描述
- 问题发生时间

---

**注意事项：**
1. 确保Python环境正确安装
2. 保持网络连接稳定
3. 定期检查日志文件
4. 及时更新依赖包
5. 定期备份重要数据